(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{427:function(e,r,t){"use strict";t.r(r);var _=t(45),v=Object(_.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"react-query-学习"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#react-query-学习"}},[e._v("#")]),e._v(" react-query 学习")]),e._v(" "),t("h2",{attrs:{id:"查询usequery"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询usequery"}},[e._v("#")]),e._v(" 查询"),t("code",[e._v("useQuery")])]),e._v(" "),t("p",[t("code",[e._v("useQuery")]),e._v(" 帮你在基础请求上包一层，使得返回的数据包括："),t("code",[e._v("isLoading")]),e._v("、"),t("code",[e._v("isError")]),e._v("、"),t("code",[e._v("isFetching")]),e._v("等表述当前请求状态的字段。你可以用这些状态控制视图呈现。")]),e._v(" "),t("p",[t("code",[e._v("useQuery")]),e._v("接受的第一个参数代表唯一键值，你可以使用这个唯一键值在整个程序中重新获取数据、缓存和共享查询。")]),e._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/261146977",target:"_blank",rel:"noopener noreferrer"}},[e._v("用 React Query 来管理数据请求"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://cangsdarm.github.io/react-query-web-i18n/",target:"_blank",rel:"noopener noreferrer"}},[e._v("React Query 中文文档"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"源码学习部分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码学习部分"}},[e._v("#")]),e._v(" 源码学习部分")]),e._v(" "),t("h3",{attrs:{id:"core"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core"}},[e._v("#")]),e._v(" core")]),e._v(" "),t("h4",{attrs:{id:"query"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#query"}},[e._v("#")]),e._v(" query")]),e._v(" "),t("ul",[t("li",[e._v("可以设置"),t("code",[e._v("cacheTime")]),e._v("，以最大的为准；")]),e._v(" "),t("li",[e._v("页面失去焦点时暂停查询，恢复焦点后，完成所有查询；")]),e._v(" "),t("li",[e._v("断网时暂停查询，恢复焦点后，完成所有查询；")]),e._v(" "),t("li",[e._v("暂停状态的查询如果取消应该抛"),t("code",[e._v("CancelledError")]),e._v("异常；")]),e._v(" "),t("li",[e._v("如果不支持取消，应该正常执行；")]),e._v(" "),t("li",[e._v("如果支持取消，程序应该终止查询；")]),e._v(" "),t("li",[e._v("明确调用取消的程序应该终止查询；")]),e._v(" "),t("li",[t("code",[e._v("loading")]),e._v("状态取消不应该报错；")]),e._v(" "),t("li",[e._v("取消的查询应该支持重发；")]),e._v(" "),t("li",[e._v("取消一个已经响应(resolved)的查询不应该有影响；")]),e._v(" "),t("li",[e._v("取消一个已经 rejected 的查询不应该有影响；")]),e._v(" "),t("li",[e._v("当查询处在"),t("code",[e._v("refetching")]),e._v("状态，之前的查询状态应该保留；")]),e._v(" "),t("li",[e._v("缓存时间为 0 时，取消订阅之后，在 cache 中查询该"),t("code",[e._v("key")]),e._v("应该为"),t("code",[e._v("undefined")]),e._v("；")]),e._v(" "),t("li",[e._v("取消订阅之后应该被回收；")]),e._v(" "),t("li",[e._v("只要有被订阅，就不应该回收；")])])])}),[],!1,null,null,null);r.default=v.exports}}]);