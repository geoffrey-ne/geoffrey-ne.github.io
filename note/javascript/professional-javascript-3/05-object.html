<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Javascript高级程序设计（第三版） | Geoffrey&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="https://github.githubassets.com/favicons/favicon.png">
    <meta name="description" content="Geoffrey's blog">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.67a86999.js" as="script"><link rel="preload" href="/assets/js/2.fdae5db8.js" as="script"><link rel="preload" href="/assets/js/37.ac5b54f2.js" as="script"><link rel="prefetch" href="/assets/js/10.4501a5bc.js"><link rel="prefetch" href="/assets/js/11.5995d4c3.js"><link rel="prefetch" href="/assets/js/12.598c37f4.js"><link rel="prefetch" href="/assets/js/13.5b19538d.js"><link rel="prefetch" href="/assets/js/14.6bfe7c84.js"><link rel="prefetch" href="/assets/js/15.dab09a0a.js"><link rel="prefetch" href="/assets/js/16.2470281c.js"><link rel="prefetch" href="/assets/js/17.2f96461f.js"><link rel="prefetch" href="/assets/js/18.e3419046.js"><link rel="prefetch" href="/assets/js/19.cce999d7.js"><link rel="prefetch" href="/assets/js/20.6e4c8097.js"><link rel="prefetch" href="/assets/js/21.578f9692.js"><link rel="prefetch" href="/assets/js/22.c8bb2c2d.js"><link rel="prefetch" href="/assets/js/23.f2b75b28.js"><link rel="prefetch" href="/assets/js/24.bf0f1f7b.js"><link rel="prefetch" href="/assets/js/25.88398bc9.js"><link rel="prefetch" href="/assets/js/26.d309345f.js"><link rel="prefetch" href="/assets/js/27.a802c1ef.js"><link rel="prefetch" href="/assets/js/28.dfeec803.js"><link rel="prefetch" href="/assets/js/29.b3af6a53.js"><link rel="prefetch" href="/assets/js/3.62656b91.js"><link rel="prefetch" href="/assets/js/30.41aa1ee6.js"><link rel="prefetch" href="/assets/js/31.c4a7c357.js"><link rel="prefetch" href="/assets/js/32.ad16ac25.js"><link rel="prefetch" href="/assets/js/33.92de37bc.js"><link rel="prefetch" href="/assets/js/34.64855c01.js"><link rel="prefetch" href="/assets/js/35.7a7d26d7.js"><link rel="prefetch" href="/assets/js/36.9f346389.js"><link rel="prefetch" href="/assets/js/38.a69b2d3f.js"><link rel="prefetch" href="/assets/js/39.6f62c9c0.js"><link rel="prefetch" href="/assets/js/4.3055d766.js"><link rel="prefetch" href="/assets/js/40.0fa8d2d0.js"><link rel="prefetch" href="/assets/js/41.f8518e29.js"><link rel="prefetch" href="/assets/js/42.89676667.js"><link rel="prefetch" href="/assets/js/43.a1766890.js"><link rel="prefetch" href="/assets/js/44.d2a7ac60.js"><link rel="prefetch" href="/assets/js/45.3ae0658b.js"><link rel="prefetch" href="/assets/js/46.5c744ae0.js"><link rel="prefetch" href="/assets/js/5.a3aaad99.js"><link rel="prefetch" href="/assets/js/6.0c08b555.js"><link rel="prefetch" href="/assets/js/7.ee9c444d.js"><link rel="prefetch" href="/assets/js/8.122d609e.js"><link rel="prefetch" href="/assets/js/9.e89f7a5f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Geoffrey's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  学习笔记
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法学习
</a></div><div class="nav-item"><a href="/fe-interview/" class="nav-link">
  FE-Interview
</a></div> <a href="https://github.com/geoffrey-ne/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  学习笔记
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法学习
</a></div><div class="nav-item"><a href="/fe-interview/" class="nav-link">
  FE-Interview
</a></div> <a href="https://github.com/geoffrey-ne/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/note/javascript/professional-javascript-3/04-var-scope-memory" class="sidebar-heading clickable open"><span>JavaScript</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/note/javascript/professional-javascript-3/04-var-scope-memory" class="sidebar-heading clickable open"><span>Javascript高级程序设计（第三版）</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/javascript/professional-javascript-3/04-var-scope-memory.html" class="sidebar-link">4. 变量、作用域和内存问题</a></li><li><a href="/note/javascript/professional-javascript-3/05-object.html" aria-current="page" class="active sidebar-link">5. 引用类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/javascript/professional-javascript-3/05-object.html#_5-1-object-类型" class="sidebar-link">5.1 Object 类型</a></li><li class="sidebar-sub-header"><a href="/note/javascript/professional-javascript-3/05-object.html#_5-2-array-类型" class="sidebar-link">5.2 Array 类型</a></li><li class="sidebar-sub-header"><a href="/note/javascript/professional-javascript-3/05-object.html#_5-3-date-类型" class="sidebar-link">5.3 Date 类型</a></li><li class="sidebar-sub-header"><a href="/note/javascript/professional-javascript-3/05-object.html#_5-4-regexp-类型" class="sidebar-link">5.4 RegExp 类型</a></li><li class="sidebar-sub-header"><a href="/note/javascript/professional-javascript-3/05-object.html#_5-5-function-类型" class="sidebar-link">5.5 Function 类型</a></li><li class="sidebar-sub-header"><a href="/note/javascript/professional-javascript-3/05-object.html#_5-6-基本包装类型" class="sidebar-link">5.6 基本包装类型</a></li><li class="sidebar-sub-header"><a href="/note/javascript/professional-javascript-3/05-object.html#_5-7-单体内置对象" class="sidebar-link">5.7 单体内置对象</a></li><li class="sidebar-sub-header"><a href="/note/javascript/professional-javascript-3/05-object.html#_5-8-小结" class="sidebar-link">5.8 小结</a></li></ul></li><li><a href="/note/javascript/professional-javascript-3/06-OOP.html" class="sidebar-link">6. 面向对象的程序设计</a></li><li><a href="/note/javascript/professional-javascript-3/08-BOM.html" class="sidebar-link">8. BOM</a></li><li><a href="/note/javascript/professional-javascript-3/15-Canvas.html" class="sidebar-link">15. Canvas绘图</a></li><li><a href="/note/javascript/professional-javascript-3/20-JSON.html" class="sidebar-link">20. JSON</a></li><li><a href="/note/javascript/professional-javascript-3/21-Ajax-Comet.html" class="sidebar-link">21. Ajax与Comet</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/note/javascript/33-js-expression-statement/expression-statement-1" class="sidebar-heading clickable"><span>33个js概念（翻译）</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note/typescript/01-base" class="sidebar-heading clickable"><span>Typescript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/note/cs/http/qwzn-1" class="sidebar-heading clickable"><span>CS</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_5-引用类型"><a href="#_5-引用类型" class="header-anchor">#</a> 5 引用类型</h1> <h2 id="_5-1-object-类型"><a href="#_5-1-object-类型" class="header-anchor">#</a> 5.1 Object 类型</h2> <p>创建 Object 实例的方式有两种：<code>new Object()</code> 和 对象字面量。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Nicholas'</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Nicholas'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>表达式上下文是指能够返回一个值。赋值操作符表示后面是一个值，所以左花括号表示一个表达式的开始，代表对象字面量。如果同样的花括号出现在语句上下文，则表示是一个语句块的开始。</p> <p>一般访问对象属性都是用点表示法，不过，js 中也可以使用方括号语法，其好处就是可以通过变量来访问属性，如果属性名包括会导致语法错误的字符，或者属性名使用关键字或保留字，或者有空格，也可以使用方括号：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

<span class="token keyword">var</span> propertyName <span class="token operator">=</span> <span class="token string">'name'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>person<span class="token punctuation">[</span>propertyName<span class="token punctuation">]</span><span class="token punctuation">)</span>

person<span class="token punctuation">[</span><span class="token string">'first name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Nicholas'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_5-2-array-类型"><a href="#_5-2-array-类型" class="header-anchor">#</a> 5.2 Array 类型</h2> <p>ECMAScript 数组可以保存任意类型，其数组大小也可以动态调整。</p> <p>创建数组：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment">// 只有一个数字时，数值会自动变为数组长度</span>
<span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">)</span> <span class="token comment">// 创建包含两个字符串的数组</span>

<span class="token comment">// 也可以不使用new</span>
<span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment">// 或者使用数组字面量</span>
<span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>访问数组元素：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 使用下标</span>
colors<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'green'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>数组的<code>length</code>不是只读的。通过设置该属性，可以移除末尾数组或者增加新项(undefined)。
如果添加元素大于数组现有项数，数组就是自动增加到该索引值加 1 的长度。</p> <h3 id="_5-2-3-栈方法"><a href="#_5-2-3-栈方法" class="header-anchor">#</a> 5.2.3 栈方法</h3> <p>栈是一种 LIFO（Last-In-First-Out，后进先出）的数据结构。栈中项的插入和移除，只发生在栈顶。</p> <p>ECMAScript 提供了 push 和 pop 方法实现栈的行为。</p> <p>push 方法接收任意数量参数，把它们逐个添加到数组末尾，并返回修改后的数组长度。</p> <p>pop 方法从数组末尾移除最后一项，减少数组的 length 值，然后返回移除的项。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> length <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">)</span> <span class="token comment">// 2 推入两项，返回更新后的数组长度</span>
length <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'black'</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

<span class="token keyword">var</span> item <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token comment">// 'black'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>colors<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_5-2-4-队列方法"><a href="#_5-2-4-队列方法" class="header-anchor">#</a> 5.2.4 队列方法</h3> <p>队列是一种 FIFO（First-In-First-Out，先进先出）的数据结构。队列是在列表末尾添加元素，从列表前端移除。</p> <p>push 方法用于向队列末尾添加元素。从数组前端获取项的方法是<code>shift</code>。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> length <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">)</span>

<span class="token function">alert</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token keyword">var</span> item <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token comment">// 'red'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>colors<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_5-2-5-重排序方法"><a href="#_5-2-5-重排序方法" class="header-anchor">#</a> 5.2.5 重排序方法</h3> <p>重排序方法有两个：sort() 和 reverse()。其中 reverse() 用于反转数组。</p> <p>sort()方法会调用每个数组项的 toString()方法，然后比较得到的字符串，即使数组中的每项都是数值，sort() 方法比较的也是字符串。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span>
values<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token comment">// 0, 1, 10, 15, 5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可见，虽然数值 5 小于 10，但是字符串比较时&quot;10&quot;则位于&quot;5&quot;前面。</p> <p>sort()方法可以接收一个比较函数，比较函数接收两个参数，如果第一个参数应该位于第二参数之前，则返回一个负数；如果相等，则返回 0，如果应该在后面，则返回一个正数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">value1<span class="token punctuation">,</span> value2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value1 <span class="token operator">&lt;</span> value2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value1 <span class="token operator">&gt;</span> value2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 简化版</span>
<span class="token comment">// function compare(value1, value2) {</span>
<span class="token comment">//   return value2 - value2</span>
<span class="token comment">// }</span>

<span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span>
values<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>compare<span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token comment">// 15, 10, 5, 1, 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>sort() 和 reverse() 返回值是经过排序后的数组。</p> <h3 id="_5-2-6-操作方法"><a href="#_5-2-6-操作方法" class="header-anchor">#</a> 5.2.6 操作方法</h3> <p>concat() 方法会先创建一个当前数组的副本，然后将接收到的参数添加到这个副本的末尾，最后返回新构建的数组。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> colors2 <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'black'</span><span class="token punctuation">,</span> <span class="token string">'brown'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">alert</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span> <span class="token comment">// red, green, blue</span>
<span class="token function">alert</span><span class="token punctuation">(</span>colors2<span class="token punctuation">)</span> <span class="token comment">// red, green, blue, yellow, black, brown</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>slice() 基于当前数组创建一个新数组。接收两个参数，即数组的起始和结束位置，包括起始位置，不包括结束位置。如果只有一个参数，则代表从该位置一直到数组末尾。</p> <p>slice() 方法不改变原数组，如果参数中具有负值，则用数组的长度加上该数来确定位置。如果起始位置大于结束位置，返回空数组。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'purple'</span><span class="token punctuation">]</span>

<span class="token keyword">var</span> colors2 <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// green, blue, yellow, purple</span>
<span class="token keyword">var</span> colors3 <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// green, blue, yellow</span>
<span class="token keyword">var</span> colors4 <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">// 等同于colors.slice(3, 4) yellow</span>
<span class="token function">alert</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token comment">// red, green, blue, yellow, purple</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>splice() 方法可以用于删除、插入和替换，该方法会改变原数组。splice 方法始终都会返回一个数组，该数组包含从原数组中删除的项（如果未删除则返回一个空数组）。</p> <ul><li>删除：两个参数：起始位置，和要删除的项数；</li> <li>插入：三个参数：起始位置，0（要删除的项），和要插入的项；</li> <li>替换：三个参数：起始位置，要删除的项数，要插入的任意数量的项。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span>
<span class="token comment">// 删除</span>
<span class="token keyword">var</span> removed <span class="token operator">=</span> color<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span> <span class="token comment">// green,blue</span>
<span class="token function">alert</span><span class="token punctuation">(</span>removed<span class="token punctuation">)</span> <span class="token comment">// red</span>
<span class="token comment">// 插入</span>
removed <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span> <span class="token comment">// green, yellow, orange, blue</span>
<span class="token function">alert</span><span class="token punctuation">(</span>removed<span class="token punctuation">)</span> <span class="token comment">// 空数组</span>
<span class="token comment">// 替换</span>
removed <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'purple'</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span> <span class="token comment">// green, red, purple, orange, blue</span>
<span class="token function">alert</span><span class="token punctuation">(</span>removed<span class="token punctuation">)</span> <span class="token comment">// yellow, 返回数组只包含一项</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_5-2-7-位置方法"><a href="#_5-2-7-位置方法" class="header-anchor">#</a> 5.2.7 位置方法</h3> <p>ECMAScript 5 为数组增加了两个位置方法：indexOf() 和 lastIndexOf()。
这两个方法都接收两个参数：查找的项和（可选）查找起始位置的索引。</p> <p>查找的比较要求必须严格相等(===)。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
numbers<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
numbers<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>

numbers<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
numbers<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Nicholas'</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Nicholas'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> morePeople <span class="token operator">=</span> <span class="token punctuation">[</span>person<span class="token punctuation">]</span>

people<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// -1</span>
morePeople<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_5-2-8-迭代方法"><a href="#_5-2-8-迭代方法" class="header-anchor">#</a> 5.2.8 迭代方法</h3> <p>ECMAScript 5 为数组定义了 5 个迭代方法。每个方法都接收两个参数：运行在每一项的函数和该运行该函数的作用域对象。</p> <p>传入的方法接收三个参数：数组的项、数组的索引和数组本身。</p> <ul><li>every(): 如果传入函数每项都返回 true，则返回 true；</li> <li>filter(): 返回传入函数返回 true 的项构成的数组；</li> <li>forEach(): 对数组每一项运行给定函数，没有返回值；</li> <li>map(): 对数组每一项运行给定函数，返回每次函数调用结果组成的数组；</li> <li>some(): 如果传入函数任一项返回 true，则返回 true。</li></ul> <p>以上方法都不改变原数组。</p> <h3 id="_5-2-9-缩小方法"><a href="#_5-2-9-缩小方法" class="header-anchor">#</a> 5.2.9 缩小方法</h3> <p>reduce() 和 reduceRight() 用于迭代数组所有项，返回一个最终值。reduceRight() 是从数组最右端开始。</p> <p>这两个方法都接收两个参数：作用在每一项上调用的函数和（可选的）作为缩小基础的初始值。
其中作用在每一项的函数接收 4 个参数：前一值、当前值、项的索引和数组对象，函数返回值会自动作为第一个参数传给下一项。</p> <p>方法第一次迭代发生在数组的第二项上。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prev <span class="token operator">+</span> cur
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// 15</span>

<span class="token comment">// reduceRight 只不过是反方向的。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_5-3-date-类型"><a href="#_5-3-date-类型" class="header-anchor">#</a> 5.3 Date 类型</h2> <p>ECMAScript 中的 Date 类型是在 java.util.Date 类基础上构建的。为此，Date 使用 UTC 国际协调时间 1970 年 1 月 1 日开始经过的毫秒数来保存日期。</p> <ul><li>Date.parse() 方法接收一个表示日期的字符串参数，然后尝试根据这个字符串返回响应日期的毫秒数；</li> <li>Date.UTC() 方法接收年份、基于 0 的月份、天数、小时、分钟、秒、毫秒数，返回响应日期的毫秒数；</li> <li>Data.now() 返回当前日期的毫秒数。</li></ul> <p>创建日期对象：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> someDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'May 25, 2004'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 等价于 var someDate = new Date(&quot;May 25, 2004&quot;)</span>
<span class="token keyword">var</span> y2k <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 等价于var y2k = new Date(2000, 0)</span>
<span class="token keyword">var</span> nowNumber <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-3-1-继承的方法"><a href="#_5-3-1-继承的方法" class="header-anchor">#</a> 5.3.1 继承的方法</h3> <p>Date 也重写了 toLocaleString()、toString()、valueOf()方法。其中 toLocaleString()方法会按照与浏览器设置的地区相适应的格式返回日期，而 toString()通常返回带有时区信息的日期和时间。</p> <p>这两个方法在不同浏览器中返回的日期格式大相径庭，一般只用于调试。</p> <p>valueOf()方法会返回日期的毫秒表示，所以可以方便比较日期值。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2007</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2007</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>date1 <span class="token operator">&lt;</span> date2<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-3-2-日期格式化方法"><a href="#_5-3-2-日期格式化方法" class="header-anchor">#</a> 5.3.2 日期格式化方法</h3> <p>Date 类型还有很多专门用于将日期格式化为字符串的方法，但是这些方法的输出也是因浏览器而异的，因此没有哪个方法能够用在用户界面显示一致的日期信息。</p> <h3 id="_5-3-3-日期组件方法"><a href="#_5-3-3-日期组件方法" class="header-anchor">#</a> 5.3.3 日期组件方法</h3> <p>Date 类型的方法提供了直接取得和设置日期值中特定部分的方法。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

now<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回4位数的年份，如2007而非仅07</span>
now<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回月份，0代表1月，11代表12月</span>
now<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回天数，1到31</span>
now<span class="token punctuation">.</span><span class="token function">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回星期数</span>
now<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回小时数，0-23</span>
now<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 分钟数，0-59</span>
now<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 秒数 0-59</span>
now<span class="token punctuation">.</span><span class="token function">getMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回毫秒数</span>

now<span class="token punctuation">.</span><span class="token function">getUTCFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取UTC日期的年份</span>
<span class="token comment">// ...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_5-4-regexp-类型"><a href="#_5-4-regexp-类型" class="header-anchor">#</a> 5.4 RegExp 类型</h2> <p>ECMAScript 通过 RegExp 类型支持正则表达式。</p> <p>其语法如下：</p> <p>var expression = / pattern / flags ;</p> <p>其中，pattern 部分可以是任意正则表达式，每个正则都可以带一个或者多个标志，用于表明表达式行为。</p> <ul><li>g：表示全局模式，即模式将被应用于所有字符串，而非在发现第一个匹配项时立即停止；</li> <li>i: 匹配时忽略大小写；</li> <li>m: 多行模式，到达一行文本末尾还会继续查找下一行。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> pattern1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[bc]at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span>
<span class="token keyword">var</span> pattern2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'[bc]at'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span>

<span class="token comment">// pattern1 2 是两个完全等价的正则表达式，匹配第一个“bat”或 “cat”，不区分大小写</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>正则表达式中的元字符：<code>( ) [ ] { } \ ^ $ | ? * + .</code>。模式中使用元字符必须转义，而构造函数创建正则接收的两个参数都是字符串，所有元字符都必须双重转义。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> pattern1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[bc\]at</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">var</span> pattern2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\[bc\\]at'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> pattern3 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">name\/age</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">var</span> pattern4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'name\\/age'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-4-1-regexp-实例属性"><a href="#_5-4-1-regexp-实例属性" class="header-anchor">#</a> 5.4.1 RegExp 实例属性</h3> <ul><li>global: [boolean] 表示是否设置了 g 标志；</li> <li>ignoreCase: [boolean] 表示是否设置了 i 标志；</li> <li>multiline: [boolean] 表示是否设置了 m 标志；</li> <li>lastIndex: [Number] 表示开始搜索下一个匹配项的字符位置，从 0 算起；</li> <li>source: [String] 正则表达式的字符串表示，按字面量形式，而不是构造函数中的字符串模式。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\[bc\\]at'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span>

<span class="token function">alert</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>global<span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token function">alert</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>ignoreCase<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>multiline<span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token function">alert</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">alert</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>global<span class="token punctuation">)</span> <span class="token comment">// &quot;\[bc\]at&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_5-4-2-regexp-实例方法"><a href="#_5-4-2-regexp-实例方法" class="header-anchor">#</a> 5.4.2 RegExp 实例方法</h3> <h4 id="exec-方法"><a href="#exec-方法" class="header-anchor">#</a> exec() 方法</h4> <p>方法接收一个参数，即要应用模式的字符串。如果匹配成功返回第一匹配项信息的数组，如果没有匹配项返回 null。在数组中，第一项是与整个模式匹配的字符串，其他项是与模式中的捕获组匹配的字符串。</p> <p>方法返回的虽然是 array 的实例，但包含两个额外的属性：index 和 input。
index 表示匹配项在字符串中的位置。input 表示应用正则表达式的字符串。</p> <p>如果模式中设置了全局标志（g），它每次只返回一个匹配项，多次调用会继续查找匹配项。而如果没有设置全局标志，多次调用将始终返回第一个匹配项。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">'cat, bat, sat, fat'</span>
<span class="token keyword">var</span> pattern1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.at</span><span class="token regex-delimiter">/</span></span>

<span class="token keyword">var</span> matches <span class="token operator">=</span> pattern1<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// cat</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern1<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span> <span class="token comment">// 0</span>

matches <span class="token operator">=</span> pattern1<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// cat</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern1<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span> <span class="token comment">// 0</span>

<span class="token keyword">var</span> pattern2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>

<span class="token keyword">var</span> matches <span class="token operator">=</span> pattern2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// cat</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern2<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span> <span class="token comment">// 3</span>

matches <span class="token operator">=</span> pattern2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token comment">// 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// bat</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern2<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span> <span class="token comment">// 8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="test-方法"><a href="#test-方法" class="header-anchor">#</a> test() 方法</h4> <p>方法接收一个字符串参数。匹配时返回 true，否则返回 false。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">'000-00-0000'</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{3}-\d{2}-\d{4}</span><span class="token regex-delimiter">/</span></span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'The pattern was matched.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>RegExp 实例继承的 toLocaleString() 和 toString()方法都返回正则表达式的字面量，与创建正则表达式的方式无关。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\[bc\\]at'</span><span class="token punctuation">,</span> <span class="token string">'gi'</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// /\[bc\]at/gi</span>
<span class="token function">alert</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// /\[bc\]at/gi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>正则表达式的 valueOf()方法返回正则表达式本身。</p> <h3 id="_5-4-3-regexp-构造函数属性"><a href="#_5-4-3-regexp-构造函数属性" class="header-anchor">#</a> 5.4.3 RegExp 构造函数属性</h3> <h3 id="_5-4-4-模式的局限性"><a href="#_5-4-4-模式的局限性" class="header-anchor">#</a> 5.4.4 模式的局限性</h3> <h2 id="_5-5-function-类型"><a href="#_5-5-function-类型" class="header-anchor">#</a> 5.5 Function 类型</h2> <p>每个函数都是 Funciton 类型的实例，与其他引用类型一样具有属性和方法。</p> <p>定义函数有几种方式：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 函数声明</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2
<span class="token punctuation">}</span>

<span class="token comment">// 函数表达式</span>
<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2
<span class="token punctuation">}</span>

<span class="token comment">// 不推荐</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'num1'</span><span class="token punctuation">,</span> <span class="token string">'num2'</span><span class="token punctuation">,</span> <span class="token string">'return num1 + num2'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>函数名仅仅是指向对象的一个指针，这与包含对象的指针没有什么不同。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 20</span>

<span class="token keyword">var</span> anotherSum <span class="token operator">=</span> sum
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">anotherSum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 20</span>

sum <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">anotherSum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 20</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_5-5-1-没有重载"><a href="#_5-5-1-没有重载" class="header-anchor">#</a> 5.5.1 没有重载</h3> <p>在创建第二个函数时，实际上覆盖了引用第一个函数的变量。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">addSomeNumber</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">+</span> <span class="token number">100</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">addSomeNumber</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">+</span> <span class="token number">200</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">addSomeNumber</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment">// 300</span>

<span class="token keyword">var</span> <span class="token function-variable function">addSomeNumber1</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">+</span> <span class="token number">100</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">addSomeNumber1</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">+</span> <span class="token number">200</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result1 <span class="token operator">=</span> <span class="token function">addSomeNumber1</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment">// 300</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_5-5-2-函数声明与函数表达式"><a href="#_5-5-2-函数声明与函数表达式" class="header-anchor">#</a> 5.5.2 函数声明与函数表达式</h3> <p>函数声明会被解析器率先读取（函数声明提升），并使其在执行任何代码之前可用。
至于函数表达式则必须等到解析器执行到它所在的代码行，才会真正被解释执行。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 20</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// unexpected identifier</span>
<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-5-3-作为值的函数"><a href="#_5-5-3-作为值的函数" class="header-anchor">#</a> 5.5.3 作为值的函数</h3> <p>因为函数本身就是变量，所以函数也可以作为值来使用。即函数可以作为函数参数，也可以作为函数返回值。</p> <h3 id="_5-5-4-函数内部属性"><a href="#_5-5-4-函数内部属性" class="header-anchor">#</a> 5.5.4 函数内部属性</h3> <p>arguments：是一个类数组对象，包含着传入函数中的所有参数。
this：引用的事函数据以执行的环境对象。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'blue'</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// red</span>

o<span class="token punctuation">.</span>sayColor <span class="token operator">=</span> sayColor
o<span class="token punctuation">.</span><span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'blue'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_5-5-5-函数的属性和方法"><a href="#_5-5-5-函数的属性和方法" class="header-anchor">#</a> 5.5.5 函数的属性和方法</h3> <p>每个函数都包含两个属性：length 和 prototype。length 属性表示函数希望接收的命名参数的个数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2
<span class="token punctuation">}</span>
<span class="token function">alert</span><span class="token punctuation">(</span>sayName<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token function">alert</span><span class="token punctuation">(</span>sum<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>prototype 在第六章介绍。</p> <p>caller 和 callee 不做要求。</p> <h4 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h4> <p>每个函数都包含两个非继承而来的方法：apply()和 call()。这两个方法的用途都是在特定的作用域中调用函数，等于设置函数体内的 this 对象的值。</p> <p>不同的是对于 call()方法除第一个参数是 this 值之外，其余参数都直接传递给函数；而 apply()方法第一个参数是 this 值，第二个参数是数组。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'blue'</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// red</span>

<span class="token function">sayColor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// red</span>
<span class="token function">sayColor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// red</span>
<span class="token function">sayColor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// blue</span>

<span class="token comment">// call与 apply的区别</span>
<span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>x
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">callSum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">callSum1</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>ECMAScript 5 中还引入了 bind 方法，这个方法会创建一个函数实例，其 this 值会被绑到传给 bind()函数的值。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'blue'</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> objectSayColor <span class="token operator">=</span> <span class="token function">sayColor</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
<span class="token function">objectSayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// blue</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_5-6-基本包装类型"><a href="#_5-6-基本包装类型" class="header-anchor">#</a> 5.6 基本包装类型</h2> <p>为了方便操作基本类型值，ECMAScript 提供了 3 个特殊的引用类型：Boolean、Number 和 String。</p> <p>每当读取一个基本类型值得时候，后台就会创建一个对应的基本包装类型的对象。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token string">'some text'</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// s1可以使用substring方法</span>

<span class="token comment">// 可以理解为如下代码</span>
<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'some text'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
s1 <span class="token operator">=</span> <span class="token keyword">null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>自动创建的基本包装类型的对象只存在于代码的执行瞬间，然后立即销毁。这意味着无法为基本类型值添加属性和方法。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token string">'some text'</span>
s1<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>color<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Object 构造函数也会像工厂方法一样，根据传入值的类型不同返回相应基本包装类型的实例。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token string">'some text'</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>obj1 <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-6-1-boolean-类型"><a href="#_5-6-1-boolean-类型" class="header-anchor">#</a> 5.6.1 Boolean 类型</h3> <p>建议永远不要使用 Boolean 对象。</p> <p>Boolean 类型重写了 valueOf()方法，返回基本类型值 true 或 false；重写了 toString 方法，返回字符串“true”和 “false”。</p> <p>布尔表达式中的所有对象都会被转换为 true。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> falseObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> falseObject <span class="token operator">&amp;&amp;</span> <span class="token boolean">true</span> <span class="token comment">// true</span>

<span class="token keyword">var</span> falseValue <span class="token operator">=</span> <span class="token boolean">false</span>
result <span class="token operator">=</span> falseValue <span class="token operator">&amp;&amp;</span> <span class="token boolean">true</span> <span class="token comment">// false</span>

<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> falseObject<span class="token punctuation">)</span> <span class="token comment">// object</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> falseValue<span class="token punctuation">)</span> <span class="token comment">// boolean</span>
<span class="token function">alert</span><span class="token punctuation">(</span>falseObject <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>falseValue <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_5-6-2-number-类型"><a href="#_5-6-2-number-类型" class="header-anchor">#</a> 5.6.2 Number 类型</h3> <h4 id="tostring"><a href="#tostring" class="header-anchor">#</a> toString()</h4> <p>接收一个表示基数的参数，告诉函数返回几进制数值的字符串格式。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1010</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 12</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// a</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="tofixed"><a href="#tofixed" class="header-anchor">#</a> toFixed()</h4> <p>接收一个表示小数位数的参数，接近指定的最大小数位的值会自动舍入，返回字符串。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10.005</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;10.01&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>IE8 及以下对传入 0 时，范围在{(-0.94, -0.5],[0.5, 0.94)}之间的值不能正确舍入。</p> <h4 id="toexponential"><a href="#toexponential" class="header-anchor">#</a> toExponential()</h4> <p>返回指数(e)表示法。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toExponential</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1.0e+1&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="toprecision"><a href="#toprecision" class="header-anchor">#</a> toPrecision()</h4> <p>自动判断哪种格式最合适。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">99</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1e+2&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;99&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;99.0&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-6-3-string-类型"><a href="#_5-6-3-string-类型" class="header-anchor">#</a> 5.6.3 String 类型</h3> <p>String 具有 length 属性，表示字符串包含多少字符，双字节字符仍然算一个字符。</p> <h4 id="_1-字符方法"><a href="#_1-字符方法" class="header-anchor">#</a> 1. 字符方法</h4> <p>charAt()和 charCodeAt()用于访问字符串中特定字符的方法，两个方法都接收一个参数表示要获取的字符位置。
其中 charAt()返回字符，charCodeAt 返回字符编码。</p> <p>在 IE8 及以上，可以通过索引方式访问特定字符。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> stringValue <span class="token operator">=</span> <span class="token string">'hello world'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;e&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;101&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// &quot;e&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-字符串操作方法"><a href="#_2-字符串操作方法" class="header-anchor">#</a> 2. 字符串操作方法</h4> <p>concat() 用于拼接字符串，可以接收任意多个参数，并将它们拼接在一起。目前基本不再使用，可以用&quot;+&quot;或者&quot;``&quot;代替。</p> <p>slice()、substr()、substring()都可用于基于某个字符串创建子字符串。第一个参数为起始位置。</p> <ul><li>slice() 和 substring()第二个参数指定了最后一个字符后面的位置；</li> <li>substr() 第二个参数指定的事返回字符个数。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'hello world'</span>

<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;lo world&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;lo world&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;lo world&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;lo w&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;lo w&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;lo worl&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>当参数为负时：</p> <ul><li>slice()会将传入的负值与字符串长度相加；</li> <li>substr()将第一个负参数加上字符串长度，第二个负参数转换为 0；</li> <li>substring()会将所有负值都转换为 0。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'hello world'</span>

<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// s.slice(8) &quot;rld&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// s.substring(0)  &quot;hello world&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// s.substr(8)  &quot;rld&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// s.slice(3, 7)  &quot;lo w&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// s.substring(3, 0) s.substring(0, 3)  &quot;hel&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// s.substr(3, 0)  &quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-字符串位置方法"><a href="#_3-字符串位置方法" class="header-anchor">#</a> 3. 字符串位置方法</h4> <p>indexOf() 和 lastIndexOf() 用来从一个字符串中搜索给定的子字符串，并返回子字符串的位置。如果未找到，则返回 -1。
区别是 lastIndexOf 从字符串末尾向前搜索。</p> <p>这两个方法都接收可选的第二个参数，表示搜索的起始位置。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'hello world'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 7</span>

<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 7</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_4-trim"><a href="#_4-trim" class="header-anchor">#</a> 4. trim()</h4> <p>方法用去去除字符串所有前缀及后缀的空格，返回新字符串，不修改原字符串。兼容 IE9+</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">' hello world  '</span>
<span class="token keyword">var</span> trimS <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// &quot; hello world  &quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>trimS<span class="token punctuation">)</span> <span class="token comment">// &quot;hello world&quot;</span>

<span class="token comment">// 可以使用正则兼容</span>
s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">^</span>\s<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span>\s<span class="token operator">*</span>$<span class="token punctuation">)</span><span class="token operator">/</span>g<span class="token operator">=</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>  <span class="token comment">// &quot;hello world&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_5-字符串大小写转换方法"><a href="#_5-字符串大小写转换方法" class="header-anchor">#</a> 5. 字符串大小写转换方法</h4> <p>toLowerCase()、toUpperCase() 范别用于将字符串全部转换为小写或大写。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'hello world'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 'hello world'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 'HELLO WORLD'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 'hello world' 针对地区的方法</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toLocaleUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 'HELLO WORLD' 针对地区的方法</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>一般来说，在不知道自己代码将在哪种语言环境中运行时，使用针对地区的方法更稳妥一些。</p> <h4 id="_6-字符串的模式匹配方法"><a href="#_6-字符串的模式匹配方法" class="header-anchor">#</a> 6. 字符串的模式匹配方法</h4> <p>match() 本质与 exec()相同。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">'cat bat sat fat'</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.at</span><span class="token regex-delimiter">/</span></span>

<span class="token comment">// 与pattern.exec(text)相同</span>
<span class="token keyword">var</span> matches <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">alert</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// &quot;cat&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>search() 接收一个正则，返回搜索位置。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">'cat bat sat fat'</span>
<span class="token keyword">var</span> pos <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">at</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>replace() 简化字符串替换操作。第一参数可以是 RegExp 对象，也可以是一个字符串；
第二个参数可以是字符串，也可以是函数。</p> <p>第一个参数是字符串时，只会替换第一个子字符串。如果想要全部替换，唯一办法是使用正则。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">'cat bat sat fat'</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'at'</span><span class="token punctuation">,</span> <span class="token string">'ond'</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 'cond, bat, sat, fat'</span>

reslut <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'ond'</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 'cond, bond, sond, fond'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>第二个参数是字符串时，可以使用特殊字符序列代表指定字符串插入结果字符串中。</p> <table><thead><tr><th style="text-align:left;">字符序列</th> <th style="text-align:center;">替换文本</th></tr></thead> <tbody><tr><td style="text-align:left;">$$</td> <td style="text-align:center;">$</td></tr> <tr><td style="text-align:left;">$&amp;</td> <td style="text-align:center;">匹配整个模式的子字符串 RegExp.lastMatch</td></tr> <tr><td style="text-align:left;">$'</td> <td style="text-align:center;">匹配的子字符串之前的子字符串 RegExp.leftContext</td></tr> <tr><td style="text-align:left;">$`</td> <td style="text-align:center;">匹配的子字符串之后的子字符串 RegExp.rightContext</td></tr> <tr><td style="text-align:left;">$n</td> <td style="text-align:center;">匹配第 n 个捕获组的子字符串</td></tr> <tr><td style="text-align:left;">$nn</td> <td style="text-align:center;">匹配第 nn 个捕获组的子字符串</td></tr></tbody></table> <p>第二个参数也可以是一个函数，该函数接口三个参数：模式匹配项、匹配项在字符串中的位置和原始字符串。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">htmlEscape</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[&lt;&gt;&quot;&amp;]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> originalText</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'&lt;'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'&amp;lt;'</span>
      <span class="token keyword">case</span> <span class="token string">'&gt;'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'&amp;gt;'</span>
      <span class="token keyword">case</span> <span class="token string">'&amp;'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'&amp;amp;'</span>
      <span class="token keyword">case</span> <span class="token string">'&quot;'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'$quot;'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">htmlEscape</span><span class="token punctuation">(</span><span class="token string">'&lt;p class=&quot;greeting&quot;&gt;Hello world!&lt;/p&gt;'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>split() 基于指定的分隔符将一个字符串分割成多个子字符串，并返回一个数组。
分隔符可以是字符串，也可以是正则。</p> <p>split() 可以接收可选的第二个参数，用于指定数组大小。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> colorText <span class="token operator">=</span> <span class="token string">'red, blue, green, yellow'</span>
<span class="token keyword">var</span> color1 <span class="token operator">=</span> colorText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;yellow&quot;]</span>
<span class="token keyword">var</span> color2 <span class="token operator">=</span> colorText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;red&quot;, &quot;blue&quot;]</span>
<span class="token keyword">var</span> color3 <span class="token operator">=</span> colorText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\,]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token comment">// [&quot;&quot;, &quot;,&quot;, &quot;,&quot;, &quot;,&quot;, &quot;&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_7-localecompare-方法"><a href="#_7-localecompare-方法" class="header-anchor">#</a> 7. localeCompare() 方法</h4> <p>比对字符串在字母表中的位置。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'yellow'</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token string">'brick'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">alert</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token string">'zoo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// -1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_8-fromcharcode-方法"><a href="#_8-fromcharcode-方法" class="header-anchor">#</a> 8 fromCharCode() 方法</h4> <p>String 构造函数的静态方法。接收一个或多个字符编码，然后转换成字符串。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_5-7-单体内置对象"><a href="#_5-7-单体内置对象" class="header-anchor">#</a> 5.7 单体内置对象</h2> <p>内置对象是指由 ECMAScript 实现提供的、不依赖于宿主环境的对象。例如：<code>Object</code>、<code>Array</code>和<code>String</code>。
另外还有两个单体内置对象：<code>Global</code>和<code>Math</code>。</p> <h3 id="_5-7-1-global-对象"><a href="#_5-7-1-global-对象" class="header-anchor">#</a> 5.7.1 Global 对象</h3> <p>不属于任何其他对象的属性和方法，最终都是 Global 对象的属性。比如：<code>isNaN()</code>、<code>parseInt()</code>等。
除此之外，Global 对象还包含一些其他方法。</p> <h4 id="_1-uri-编码方法"><a href="#_1-uri-编码方法" class="header-anchor">#</a> 1. URI 编码方法</h4> <p>encodeURI() 不会对本身属于 URI 的特殊字符进行编码，例如冒号、正斜杠、问号和井字号；
encodeURIComponent() 则会对任何非标准字符进行编码。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> uri <span class="token operator">=</span> <span class="token string">'http://www.wrox.com/illegal value.htm#start'</span>

<span class="token comment">// &quot;http://www.wrox.com/illegal%20value.htm#start&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// &quot;http%3A%2F%2Fwww.wrox.com%2Fillegal%20value.htm%23start&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>与之对应的解码方法也有两个，同样的，decodeURIComponent()能够解码使用 encodeURIComponent()编码的所有字符。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> uri <span class="token operator">=</span> <span class="token string">'http%3A%2F%2Fwww.wrox.com%2Fillegal%20value.htm%23start'</span>

<span class="token comment">// &quot;http%3A%2F%2Fwww.wrox.com%2Fillegal value.htm%23start&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">decodeURI</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// &quot;http://www.wrox.com/illegal value.htm#start&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2-eval-方法"><a href="#_2-eval-方法" class="header-anchor">#</a> 2. eval() 方法</h4> <p>eval() 可能会造成代码注入的安全问题，目前已不推荐使用。</p> <p>eval() 方法就像一个完整的 ECMAScript 解析器，它只接受一个参数，即要执行的代码的字符串。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">'hello world'</span>
<span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'alert(msg)'</span><span class="token punctuation">)</span>

<span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'function sayHi() { alert(&quot;hi&quot;); }'</span><span class="token punctuation">)</span>
<span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>eval() 执行的代码被认为是包含该次调用的执行环境的一部分，因此具有相同的作用域链。</p> <p>eval() 中创建的变量或函数不会被提升。</p> <p>严格模式下，外部访问不到 eval() 中创建的任何变量或函数。并且不能为 eval() 赋值</p> <h4 id="_3-global-对象的属性"><a href="#_3-global-对象的属性" class="header-anchor">#</a> 3. Global 对象的属性</h4> <p>Global 还包括一些属性，如特殊的值：<code>undefined</code>、<code>NaN</code>、<code>Infinity</code>等，或者原生引用类型的构造函数：<code>Object</code>、<code>Function</code>。</p> <h4 id="_4-window-对象"><a href="#_4-window-对象" class="header-anchor">#</a> 4. window 对象</h4> <p>web 浏览器都是将这个全局对象作为 window 对象的一部分加以实现的。
在全局作用域中声明的所有变量和函数都成为了 window 对象的属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> color <span class="token operator">=</span> <span class="token string">'red'</span>

<span class="token keyword">function</span> <span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;red&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-7-2-math-对象"><a href="#_5-7-2-math-对象" class="header-anchor">#</a> 5.7.2 Math 对象</h3> <p>Math 保存了数学公式和信息。</p> <h4 id="_1-math-对象的属性"><a href="#_1-math-对象的属性" class="header-anchor">#</a> 1. Math 对象的属性</h4> <p>比如：</p> <ul><li><code>Math.PI</code> 代表 π 的值；</li> <li><code>Math.E</code> 代表自然对数 e 的值；</li> <li><code>Math.LOG2E</code> 代表以 2 为底 e 的对数；</li></ul> <h4 id="_2-min-和-max-方法"><a href="#_2-min-和-max-方法" class="header-anchor">#</a> 2. min() 和 max() 方法</h4> <p>这两个方法用于确定一组数值中的最小值和最大值，两个方法都可以接收任意个数参数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token comment">// 54</span>

<span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> maxValue <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span> values<span class="token punctuation">)</span> <span class="token comment">// 8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3-舍入方法"><a href="#_3-舍入方法" class="header-anchor">#</a> 3. 舍入方法</h4> <ul><li>Math.ceil() 向上舍入为最接近的整数；</li> <li>Math.floor() 向下舍入为最接近的整数；</li> <li>Math.round() 四舍五入；</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">25.9</span><span class="token punctuation">)</span> <span class="token comment">// 26</span>
Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">25.1</span><span class="token punctuation">)</span> <span class="token comment">// 26</span>

Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">25.5</span><span class="token punctuation">)</span> <span class="token comment">// 26</span>
Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">25.1</span><span class="token punctuation">)</span> <span class="token comment">// 25</span>

Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">25.9</span><span class="token punctuation">)</span> <span class="token comment">// 25</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">25.1</span><span class="token punctuation">)</span> <span class="token comment">// 25</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_4-random-方法"><a href="#_4-random-方法" class="header-anchor">#</a> 4. random() 方法</h4> <p>返回介于 0 和 1 之间的一个随机数，不包括 0 和 1。
公式：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 公式：值 = Math.floor(Math.random() * 可能值得总数 + 第一个可能的值)</span>
<span class="token keyword">var</span> num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// 1到10之间的整数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_5-其他方法"><a href="#_5-其他方法" class="header-anchor">#</a> 5. 其他方法</h4> <p>比如：</p> <ul><li><code>Math.abs(num)</code> 返回 num 的绝对值；</li> <li><code>Math.abs(sqrt)</code> 返回 num 的平方根；</li></ul> <h2 id="_5-8-小结"><a href="#_5-8-小结" class="header-anchor">#</a> 5.8 小结</h2> <ul><li>引用类型与类相似，但实现不同；</li> <li>Object 为基础类型，其他所有类型都 Object 继承了基本的行为；</li> <li>Array 类型是一组值得有序列表，提供了操作和转换这些值的能力；</li> <li>Date 类型提供了时间和日期的信息，及相关计算功能；</li> <li>RegExp 是 ECMAScript 支持正则表达式的一个接口；</li> <li>函数是 Function 的实例，所以函数也是对象，所以函数也拥有方法，可能增强其行为；这正是 js 最有特色的地方；</li> <li>基本包装类型包括：Boolean、Number、String；</li> <li>在所有代码执行之前，作用域中就已经存在两个内置对象：Global 和 Math。大多数 ECMAScript 实现中都不能直接访问 Global 对象；</li> <li>web 浏览器中 window 对象承担了该角色；</li> <li>全局变量和函数都是 Global 对象的属性；</li> <li>Math 用于辅助完成复杂的数学计算任务。</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新于:</span> <span class="time">3/11/2021, 9:33:26 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/javascript/professional-javascript-3/04-var-scope-memory.html" class="prev">
        4. 变量、作用域和内存问题
      </a></span> <span class="next"><a href="/note/javascript/professional-javascript-3/06-OOP.html">
        6. 面向对象的程序设计
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.67a86999.js" defer></script><script src="/assets/js/2.fdae5db8.js" defer></script><script src="/assets/js/37.ac5b54f2.js" defer></script>
  </body>
</html>
